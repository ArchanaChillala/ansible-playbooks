---
- hosts: vagrant

  vars:
    gem_bin_path: ~/.rvm/gems/$ruby/bin
    user: vagrant

  sudo: no

  tasks: 

    - name: Ensure python-pygments is installed
      apt: pkg=python-pygments state=installed
      sudo: yes

    # Note that we run gem install commands via the shell rather than using the
    # Ansible gem module, in order to play nicely with RVM

    - name: Ensure Jekyll's gem dependencies are installed
      shell: gem install {{ item.name }} -v {{ item.version }} {{ item.flags }}
      with_items:
        - { name: 'jekyll',            version: '1.4.3', flags: '--no-ri --no-rdoc' }

    # Print a useful warning
    - name: NOTICE! You will need to exit the terminal and open a fresh terminal before you can use Jekyll
      shell: echo "-"
